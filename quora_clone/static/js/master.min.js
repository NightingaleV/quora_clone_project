"use strict";function getCookie(e){var t=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var a=jQuery.trim(o[n]);if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}var csrftoken=getCookie("csrftoken");function csrfSafeMethod(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}$.ajaxSetup({beforeSend:function(e,t){csrfSafeMethod(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",csrftoken)}}),$(document).ready(function(){$(document).on("click",".button-bookmark",function(){event.preventDefault();var e=$(this),t=e.attr("data-answer-id"),o=(e.closest(".topic").find(".counter"),e.find(".icon"));$.ajax({type:"POST",url:"/actions/bookmark-answer/",data:{answer_id:t},success:function(e){console.log(e),"bookmarkSaved"===e.status?o.addClass("red"):"bookmarkDeleted"===e.status?o.removeClass("red"):console.log("we Fail")},error:function(e){}})})}),$(document).ready(function(){$(document).on("click",".upvote-wrapper > .action.button",function(){event.preventDefault();var t=$(this),e=t.attr("data-answer-id"),o=t.closest(".upvote-wrapper").find(".counter .text"),n=t.closest(".upvote-wrapper").find(".counter .icon"),a=t.find(".icon"),s=t.find(".text"),r=parseInt(o.text());$.ajax({type:"POST",url:"/actions/upvote-answer/",data:{answer_id:e},success:function(e){console.log(e),"upvoteSaved"===e.status?(r+=1,o.text(r),n.removeClass("grey"),n.addClass("red"),s.text("Downvote"),t.removeClass("upvote"),t.addClass("downvote"),a.removeClass("arrow up red"),a.addClass("arrow down")):"upvoteDeleted"===e.status?(r-=1,o.text(r),n.removeClass("red"),n.addClass("grey"),s.text("Upvote"),t.removeClass("downvote"),t.addClass("upvote"),a.removeClass("arrow down"),a.addClass("arrow up red")):console.log("we Fail")},error:function(e){}})})}),$(document).ready(function(){var n="/actions/create-answer/";$(document).on("click",".answer.button",function(){event.preventDefault();var e=$(this).attr("data-question-id"),o=$(".modal-wrapper");$.ajax({type:"GET",url:n,data:{question_id:e},success:function(e){console.log(e),o.append(e);var t=$(".create-answer.modal");t.modal({onHidden:function(){t.remove()}}).modal("show")},error:function(e){}})}),$(document).on("click",".create-answer .submit.button",function(){event.preventDefault();$(this),$(".create-answer.modal");var e=$(".create-answer .form"),t=$(".create-answer.modal .question.text").attr("data-question-id"),o=e.serialize()+"&question="+t;console.log(o),$.ajax({type:"POST",url:n,data:o,success:function(e){console.log(e)},error:function(e){}})})}),$(document).ready(function(){$(document).on("click",".edit-answer.button",function(){event.preventDefault();var e=$(this).attr("data-answer-id"),o=$(".modal-wrapper");$.ajax({type:"GET",url:"/actions/edit-answer/"+e,data:{},success:function(e){console.log(e),o.append(e);var t=$(".edit-answer.modal");t.modal({onHidden:function(){t.remove()}}).modal("show")},error:function(e){}})}),$(document).on("click",".edit-answer .submit.button",function(){event.preventDefault();$(this),$(".edit-answer.modal");var e=$(".edit-answer .form"),t=e.attr("action");$.ajax({type:"POST",url:t,data:e.serialize(),success:function(e){console.log(e),window.location.reload()},error:function(e){}})}),$(document).on("click",".edit-answer .delete.button",function(){event.preventDefault();$("edit-answer");var e=$(".edit-answer .form").attr("action").split("/"),t=e[e.length-1];console.log(e[e.length-1]),$.ajax({type:"POST",url:"/actions/delete-answer/",data:{answer_id:t},success:function(e){console.log(e),"answerDeleted"===e.status&&window.location.reload()},error:function(e){}})})}),$(document).ready(function(){var n="/actions/create-question/";$(document).on("click",".create-question.button",function(){event.preventDefault();$(this);var o=$(".modal-wrapper");$.ajax({type:"GET",url:n,data:{},success:function(e){console.log(e),o.append(e);var t=$(".create-question.modal");t.modal({onHidden:function(){t.remove()}}).modal("show")},error:function(e){}})}),$(document).on("click",".create-answer .submit.button",function(){event.preventDefault();$(this);var t=$(".create-question.modal"),e=$(".create-question .form").serialize();console.log(e),$.ajax({type:"POST",url:n,data:e,success:function(e){console.log(e),t.modal("hide")},error:function(e){}})})}),$(document).ready(function(){$(document).on("click","button.follow-question",function(){event.preventDefault();var e=$(this),t=e.attr("data-question-id"),o=e.closest(".follow-question-wrapper").find(".counter .text"),n=parseInt(o.text()),a=e.find(".icon"),s=e.find(".text");$.ajax({type:"POST",url:"/actions/follow-question/",data:{question_id:t},success:function(e){console.log(e),"questionFollowed"===e.status?(n+=1,o.text(n),s.text("Following Question"),a.removeClass("blue")):"questionUnfollowed"===e.status?(n-=1,o.text(n),s.text("Follow Question"),a.addClass("blue")):console.log("Failed")},error:function(e){}})})}),$(document).ready(function(){$(document).on("click","button.answer-later",function(){event.preventDefault();var e=$(this),t=e.attr("data-question-id"),o=e.find(".icon");e.find(".text");$.ajax({type:"POST",url:"/actions/remind-question/",data:{question_id:t},success:function(e){console.log(e),"reminderCreated"===e.status?o.removeClass("outline"):"reminderDeleted"===e.status?o.addClass("outline"):console.log("Failed")},error:function(e){}})})}),$(document).ready(function(){$(document).on("click",".subscription > .button",function(){event.preventDefault();var a=$(this),s=$(this).attr("data-topic-id"),r=$(this).closest(".topic").find(".subs-counter"),i=$(this).find(".icon"),c=$(this).find(".text"),d=parseInt(r.text());$.ajax({type:"POST",url:"/topics/",data:{topic_id:s},success:function(e){var t,o,n;console.log(e),"subscribed"===e.status?(console.log(s),d+=1,r.text(d),c.text("Unsubscribe"),a.removeClass("subscribe red inverted"),a.addClass("unsubscribe basic"),i.removeClass("plus"),i.addClass("minus"),t=s,o=$(".interest.modal .rating"),n=$(".knowledge.modal .rating"),o.attr("data-topic-id",t),o.attr("data-rating",0),o.rating("clear rating"),n.attr("data-topic-id",t),n.attr("data-rating",0),n.rating("clear rating"),$(".interest.modal").modal("show")):"unsubscribed"===e.status?(d-=1,r.text(d),a.removeClass("unsubscribe basic"),c.text("Subscribe"),a.addClass("subscribe red inverted"),i.removeClass("minus"),i.addClass("plus")):console.log("Integrity Error")},error:function(e){}})}),$(".second.modal").modal("attach events",".first .icon"),$(".second .rating").click(function(){$(".second.modal").modal("hide")})}),$(document).ready(function(){$(".rating").rating()}),$(document).on("click",".modal.interest .rating",function(){var e=$(this).attr("data-topic-id");console.log(e);var t=$(this).rating("get rating");console.log(t),$.ajax({type:"POST",url:"/topics/",data:{interest_rating:t,topic_id:e},success:function(e){console.log(e),"rating_saved"===e.status?($(".second.modal").modal("show"),$(".first.modal").modal("hide")):console.log("we Fail")},error:function(e){}})}),$(document).on("click",".modal.knowledge .rating",function(){var e=$(this).attr("data-topic-id");console.log(e);var t=$(this).rating("get rating");console.log(t),$.ajax({type:"POST",url:"/topics/",data:{knowledge_rating:t,topic_id:e},success:function(e){console.log(e),"rating_saved"===e.status||console.log("we Fail")},error:function(e){}})}),$(".ui.accordion").accordion({selector:{accordion:".answer .accordion",title:".preview",trigger:".preview",content:".content"},debug:!0,duration:1,onOpen:function(){console.log($(this)),$(this).closest(".answer").find(".preview").hide()}}),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")}),$(document).ready(function(){$(".menu .item").tab({history:!1})}),$(document).ready(function(){$(document).on("click","button.follow-user",function(){event.preventDefault();var t=$(this),e=t.attr("data-user-id"),o=(t.find(".icon"),t.find(".text"));$.ajax({type:"POST",url:"/users/follow/",data:{following_id:e},success:function(e){console.log(e),"followingCreated"===e.status?(o.text("Following"),t.removeClass("basic")):"followingDeleted"===e.status?(o.text("Follow"),t.addClass("basic")):console.log("Failed")},error:function(e){}})})});