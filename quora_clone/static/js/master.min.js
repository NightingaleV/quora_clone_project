"use strict";function getCookie(t){var e=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var a=jQuery.trim(o[n]);if(a.substring(0,t.length+1)===t+"="){e=decodeURIComponent(a.substring(t.length+1));break}}return e}var csrftoken=getCookie("csrftoken");function csrfSafeMethod(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}$.ajaxSetup({beforeSend:function(t,e){csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",csrftoken)}}),$(document).ready(function(){$(document).on("click",".button-bookmark",function(){event.preventDefault();var t=$(this),e=t.attr("data-answer-id"),o=t.attr("data-user-id"),n=(t.closest(".topic").find(".counter"),t.find(".icon"));$.ajax({type:"POST",url:"/actions/bookmark-answer/",data:{answer_id:e,user_id:o},success:function(t){console.log(t),"bookmarkSaved"===t.status?n.addClass("red"):"bookmarkDeleted"===t.status?n.removeClass("red"):console.log("we Fail")},error:function(t){}})})}),$(document).ready(function(){$(document).on("click",".upvote-wrapper > .action.button",function(){event.preventDefault();var e=$(this),t=e.attr("data-answer-id"),o=e.attr("data-user-id"),n=e.closest(".upvote-wrapper").find(".counter .text"),a=e.closest(".upvote-wrapper").find(".counter .icon"),s=e.find(".icon"),r=e.find(".text"),i=parseInt(n.text());$.ajax({type:"POST",url:"/actions/upvote-answer/",data:{answer_id:t,user_id:o},success:function(t){console.log(t),"upvoteSaved"===t.status?(i+=1,n.text(i),a.removeClass("grey"),a.addClass("red"),r.text("Downvote"),e.removeClass("upvote"),e.addClass("downvote"),s.removeClass("arrow up red"),s.addClass("arrow down")):"upvoteDeleted"===t.status?(i-=1,n.text(i),a.removeClass("red"),a.addClass("grey"),r.text("Upvote"),e.removeClass("downvote"),e.addClass("upvote"),s.removeClass("arrow down"),s.addClass("arrow up red")):console.log("we Fail")},error:function(t){}})})}),$(document).ready(function(){var n="/actions/create-answer/";$(document).on("click",".answer.button",function(){event.preventDefault();var t=$(this).attr("data-question-id"),o=$(".modal-wrapper");$.ajax({type:"GET",url:n,data:{question_id:t},success:function(t){console.log(t),o.append(t);var e=$(".create-answer.modal");e.modal({onHidden:function(){e.remove()}}).modal("show")},error:function(t){}})}),$(document).on("click",".create-answer .submit.button",function(){event.preventDefault();$(this),$(".create-answer.modal");var t=$(".create-answer .form"),e=$(".create-answer.modal .question.text").attr("data-question-id"),o=t.serialize()+"&question="+e;$.ajax({type:"POST",url:n,data:o,success:function(t){console.log(t),window.location.reload()},error:function(t){}})})}),$(document).ready(function(){$(document).on("click",".edit-answer.button",function(){event.preventDefault();var t=$(this).attr("data-answer-id"),o=$(".modal-wrapper");$.ajax({type:"GET",url:"/actions/edit-answer/"+t,data:{},success:function(t){console.log(t),o.append(t);var e=$(".edit-answer.modal");e.modal({onHidden:function(){e.remove()}}).modal("show")},error:function(t){}})}),$(document).on("click",".edit-answer .submit.button",function(){event.preventDefault();$(this),$(".edit-answer.modal");var t=$(".edit-answer .form"),e=t.attr("action");$.ajax({type:"POST",url:e,data:t.serialize(),success:function(t){console.log(t),window.location.reload()},error:function(t){}})}),$(document).on("click",".edit-answer .delete.button",function(){event.preventDefault();$("edit-answer");var t=$(".edit-answer .form").attr("action").split("/"),e=t[t.length-1];console.log(t[t.length-1]),$.ajax({type:"POST",url:"/actions/delete-answer/",data:{answer_id:e},success:function(t){console.log(t),"answerDeleted"===t.status&&window.location.reload()},error:function(t){}})})}),$(document).ready(function(){$(document).on("click","button.follow-question",function(){event.preventDefault();var t=$(this),e=t.attr("data-question-id"),o=t.attr("data-user-id"),n=t.closest(".follow-question-wrapper").find(".counter .text"),a=parseInt(n.text()),s=t.find(".icon"),r=t.find(".text");$.ajax({type:"POST",url:"/actions/follow-question/",data:{question_id:e,user_id:o},success:function(t){console.log(t),"questionFollowed"===t.status?(a+=1,n.text(a),r.text("Following Question"),s.removeClass("blue")):"questionUnfollowed"===t.status?(a-=1,n.text(a),r.text("Follow Question"),s.addClass("blue")):console.log("Failed")},error:function(t){}})})}),$(document).ready(function(){$(document).on("click","button.answer-later",function(){event.preventDefault();var t=$(this),e=t.attr("data-question-id"),o=t.attr("data-user-id"),n=t.find(".icon");t.find(".text");$.ajax({type:"POST",url:"/actions/remind-question/",data:{question_id:e,user_id:o},success:function(t){console.log(t),"reminderCreated"===t.status?n.removeClass("outline"):"reminderDeleted"===t.status?n.addClass("outline"):console.log("Failed")},error:function(t){}})})}),$(document).ready(function(){$(document).on("click",".subscription > .button",function(){event.preventDefault();var a=$(this),s=$(this).attr("data-topic-id"),r=$(this).closest(".topic").find(".subs-counter"),i=$(this).find(".icon"),c=$(this).find(".text"),d=parseInt(r.text());$.ajax({type:"POST",url:"/topics/",data:{topic_id:s},success:function(t){var e,o,n;console.log(t),"subscribed"===t.status?(console.log(s),d+=1,r.text(d),c.text("Unsubscribe"),a.removeClass("subscribe red"),a.addClass("unsubscribe"),i.removeClass("plus"),i.addClass("minus"),e=s,o=$(".interest.modal .rating"),n=$(".knowledge.modal .rating"),o.attr("data-topic-id",e),o.attr("data-rating",0),o.rating("clear rating"),n.attr("data-topic-id",e),n.attr("data-rating",0),n.rating("clear rating"),$(".interest.modal").modal("show")):"unsubscribed"===t.status?(d-=1,r.text(d),a.removeClass("unsubscribe"),c.text("Subscribe"),a.addClass("subscribe red"),i.removeClass("minus"),i.addClass("plus")):console.log("Integrity Error")},error:function(t){}})}),$(".second.modal").modal("attach events",".first .icon"),$(".second .rating").click(function(){$(".second.modal").modal("hide")})}),$(document).ready(function(){$(".rating").rating()}),$(document).on("click",".modal.interest .rating",function(){var t=$(this).attr("data-topic-id");console.log(t);var e=$(this).rating("get rating");console.log(e),$.ajax({type:"POST",url:"/topics/",data:{interest_rating:e,topic_id:t},success:function(t){console.log(t),"rating_saved"===t.status||console.log("we Fail")},error:function(t){}})}),$(document).on("click",".modal.knowledge .rating",function(){var t=$(this).attr("data-topic-id");console.log(t);var e=$(this).rating("get rating");console.log(e),$.ajax({type:"POST",url:"/topics/",data:{knowledge_rating:e,topic_id:t},success:function(t){console.log(t),"rating_saved"===t.status||console.log("we Fail")},error:function(t){}})}),$(".ui.accordion").accordion({selector:{accordion:".answer .accordion",title:".preview",trigger:".preview",content:".content"},debug:!0,duration:1,onOpen:function(){console.log($(this)),$(this).closest(".answer").find(".preview").hide()}}),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")}),$(document).ready(function(){$(".menu .item").tab({history:!1})});